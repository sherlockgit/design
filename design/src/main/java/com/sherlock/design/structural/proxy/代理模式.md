## 代理模式
* 定义：为其他对象提供一种代理，以控制对这个对象的访问
* 代理对象在客户端和目标对象之间起到中介作用
* 类型：结构型
* 优点：代理模式能将代理对象与真实被调用的目标对象分离；在一定程度上降低了系统的耦合度，扩展性好；保护目标对象；增强目标对象
* 缺点：代理模式会造成系统设计中类的数目增加；在客户端和目标对象增加一个代理对象，会造成请求处理速度变慢；增加了系统的复杂度

## 扩展
* 静态代理：在代码中显示指定的代理
* 动态代理：动态代理类只能代理接口
* CGLib代理：使用的是继承

## spring的代理选择
* 当Bean有实现接口时，spring就会用jdk的动态代理
* 当Bean没有实现接口时，spring使用CGlib

## 速度对比
* CGLib
* jdk动态代理:在1.7；1.8时比CGLib快20%

### 相关设计模式
* 与装饰者模式：装饰者是对对象加上行为，而代理模式是控制访问
* 与适配器模式：适配器模式主要考虑接口；而代理模式不能改变代理类的接口

### 适用场景
* 保护目标对象
* 增强目标对象

### 需求
* 现有一个订购订单和用户的入库流程，需要根据驱魔进行分库入库，通过静态代理和动态代理实现

#### 1.bad
* 通过继承方式实现；可能会导致类爆炸
#### 2.good
* 标准的桥接模式

### 相关源码
#### 1.Proxy
* 来源：jdk
* 介绍：代理对象
#### 2.ProxyFactoryBean
* 来源：spring
* 介绍：代理工厂类
#### 3.JdkDynamicAopProxy
* 来源：spring
* 介绍：对jdk动态代理的封装
#### 4.CglibAopProxy
* 来源：spring
* 介绍：对Cglib动态代理的封装
#### 5.MapperProxyFactory
* 来源：mybatis
* 介绍：Mapper代理工厂